# Ballerina HTTP GET Request Creation Prompt - v4.0

**Version:** 4.0  
**Created:** 2026-02-10  
**Last Modified:** 2026-02-10  
**Status:** CDN Workaround Update

## Overview

This prompt guides creation of a simple HTTP GET endpoint in Devant using low-code only. The endpoint returns a JSON message: "hello from Ballerina integrator".

**New in v4.0:** Wait for `networkidle` before interacting. If CDNs fail, reload the page once. Include Playwright CDN-flakiness handling in generated scripts.

**Automation:** This workflow is executed using Playwright MCP (Model Context Protocol) for browser automation and interaction.

## Objectives

1. Login to Devant platform
2. Create integration and open the browser-based editor
3. Navigate to "Ballerina Integrator" (or "WSO2 Integrator: BI") in the left sidebar
4. Create HTTP GET endpoint using low-code UI elements only
5. Configure response payload
6. Test the endpoint
7. Document each step with screenshots

## Strict Low-Code Rules (Mandatory)

- Use only low-code UI elements (Entry Points, Listeners, Connections, etc.).
- Do NOT open or edit any .bal files.
- Do NOT use Show Source or any code view.
- Do NOT modify code directly in the editor.
- If a step requires code, stop and request guidance.

## Waiting and Loading Rules

- After each navigation, wait for the `networkidle` state before interacting.
- After each UI action, wait 2-5 seconds for resources to load.
- If a spinner or loading indicator is visible, wait until it disappears.
- If the UI looks blank or partially loaded, wait and retry after 3 seconds.
- If CDN resources fail to load, reload the page once and re-check UI stability.
- Capture a screenshot only after the UI is fully loaded and stable.

## CDN Failure Handling via Playwright (When Generating Script)

If the agent is writing Playwright code, include this block to handle CDN flakiness:

```javascript
// Add this to the Playwright script to handle CDN flakiness
const context = await browser.newContext({
  ignoreHTTPSErrors: true,
});

// Optional: Block the specific failing CDN and force a local fallback
// if you have the files, or simply increase the timeout.
await page.route('**/*.{js,css}', async route => {
  const response = await route.fetch({ timeout: 60000 }); // Increase timeout to 60s
  await route.fulfill({ response });
});
```

## Key Requirements

- **Platform:** Devant (Low-Code)
- **Language:** Ballerina
- **Request Type:** HTTP GET
- **Response Body:** "hello from Ballerina integrator"
- **Implementation:** Low-Code Only (no pro-code)
- **Documentation:** Markdown format with screenshots
- **Screenshots Directory:** screenshots/v4.0/
- **Workflow Document Directory:** workflow-docs/

## Screenshot Versioning Rules

- Before capturing any screenshots, create a new versioned directory screenshots/v4.0/.
- Remove any previous version screenshot directories (for example, screenshots/v3.0/) to avoid mixing versions.
- Save all screenshots only inside the current versioned directory.

## Workflow Stages

### Stage 1: Authentication
- Navigate to Devant platform
- Enter credentials
- Handle OTP if requested

### Stage 2: Project Setup
- Access the Ballerina project
- Click "Create an Integration"
- Wait for browser-based editor to load

### Stage 3: Navigate to Ballerina Integrator View
- In the left sidebar, click on "Ballerina Integrator" or "WSO2 Integrator: BI" icon
- Wait for the low-code interface to load
- Confirm that Entry Points, Listeners, and other low-code sections are visible

### Stage 4: HTTP GET Creation (Low-Code Only)
- In the Ballerina Integrator view, navigate to "Entry Points"
- Click "Add Entry Point"
- Select HTTP Resource type
- Configure:
  - HTTP Method: GET
  - Resource Path: /hello
  - Entry Point Name: HelloWorldGET

### Stage 5: Response Configuration
- Configure response mapping:
  - Content-Type: application/json
  - Response Body: {"message": "hello from Ballerina integrator"}

### Stage 6: HTTP Listener Configuration
- Navigate to "Listeners" section
- Add HTTP listener:
  - Port: 8080
  - Host: localhost

### Stage 7: Testing and Verification
- Deploy the endpoint
- Test GET request
- Verify response output

### Stage 8: Documentation
- Capture screenshots at each step
- Document all steps in the workflow guide

## Agent Instructions

The agent should autonomously:
1. Choose the best low-code UI tools available in the Ballerina Integrator view
2. Navigate through the interface to accomplish the end goal
3. Adapt to UI changes or variations in element names
4. Wait appropriately for resources to load (including `networkidle`)
5. Reload once if CDN resources fail
6. Capture screenshots at each significant milestone
7. Document any issues encountered

If the low-code interface does not load or is unavailable:
- Wait and retry (up to 3 attempts)
- Request user guidance if persistent failure

## Credentials

- **Email:** vishwajayawickrama2002@gmail.com
- **Password:** vishwacat
- **OTP:** Ask the user if prompted

## Deliverables

1. **Workflow Documentation** (workflow-docs/v4.0_workflow_create_http_get_request.md)
2. **Screenshots** (screenshots/v4.0/v4_step_XX_*.png)
3. **Verification** of working GET endpoint (if reachable)

## Execution Log

- [ ] Stage 1: Authentication Complete
- [ ] Stage 2: Project Setup Complete
- [ ] Stage 3: Ballerina Integrator View Loaded
- [ ] Stage 4: HTTP GET Creation Complete
- [ ] Stage 5: Response Configuration Complete
- [ ] Stage 6: HTTP Listener Configuration Complete
- [ ] Stage 7: Testing and Verification Complete
- [ ] Stage 8: Documentation Complete

## Success Criteria

- All low-code steps documented with screenshots
- No direct code editing performed
- Entry point created successfully using UI
- Workflow guide updated with all steps
- Screenshots organized in versioned directory
