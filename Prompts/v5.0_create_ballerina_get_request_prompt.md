# Ballerina HTTP GET Request Creation Prompt - v5.0

**Version:** 5.0  
**Created:** 2026-02-10  
**Last Modified:** 2026-02-10  
**Status:** Live Documentation + CDN Hardening

## Overview

Create a simple HTTP GET endpoint in Devant using **only** the low-code UI. The endpoint returns JSON `{ "message": "hello from Ballerina integrator" }`. While executing, **create the workflow doc on the fly and update it immediately after every screenshot** with the screenshot link and a one-line explanation (no pre-created workflow doc).

**New in v5.0:**
- Live documentation loop: when a screenshot is saved, immediately create (if missing) and append to `workflow-docs/v5.0_workflow_create_http_get_request.md`, referencing the file in `screenshots/v5.0/` with a brief action note. The workflow doc must be generated during the Playwright run, not beforehand.
- Stronger CDN resilience: retry once with cache-bypass reload; fall back to route interception with 60s timeout.
- Service validation: use "Try Service" inside Service Designer to verify GET `/hello` returns expected JSON before concluding.

**Automation:** Executed with Playwright MCP. Scripts must keep the doc in sync with captured screenshots.

## Objectives

1. Login to Devant
2. Open/create integration and load the editor
3. Navigate to **Ballerina Integrator (WSO2 Integrator: BI)**
4. Create HTTP GET `/hello` entry point via low-code UI only
5. Configure JSON response body
6. Ensure listener is bound (host localhost, port 8080)
7. Test via Try Service and (if available) curl
8. Capture screenshots and update workflow doc after each major step

## Strict Low-Code Rules (Mandatory)

- Use only low-code UI (Entry Points, Listeners, Connections, etc.).
- Do **not** open or edit `.bal` files, Show Source, or any code view.
- If a step forces code editing, stop and ask for guidance.

## Waiting / Loading / CDN Rules

- Wait for `networkidle` after each navigation and before interacting.
- After each action, pause 2-5s for UI stabilization; wait for spinners to disappear.
- If UI appears blank/partial, wait 3s and retry.
- CDN failure handling (UI run):
  - If dialogs/iframes fail to load, reload once with cache bypass (Ctrl+Shift+R) and wait for `networkidle`.
  - If still failing, apply Playwright route interception for `**/*.{js,css}` with 60s fetch timeout and `ignoreHTTPSErrors: true`, then retry action.

## Playwright CDN Hardening Block (for generated scripts)

```javascript
// Context with HTTPS-ignore and generous timeouts
const context = await browser.newContext({
  ignoreHTTPSErrors: true,
});

// Route interception to survive CDN flakiness
await page.route('**/*.{js,css}', async route => {
  const response = await route.fetch({ timeout: 60000 });
  await route.fulfill({ response });
});
```

## Key Requirements

- Platform: Devant (Low-Code)
- Language: Ballerina
- Request: HTTP GET
- Path: /hello
- Response Body: `{ "message": "hello from Ballerina integrator" }`
- Listener: Host `localhost`, Port `8080`
- Implementation: Low-Code only
- Documentation: Markdown with live updates as screenshots are taken; create the workflow doc dynamically during the run
- Screenshot directory: `screenshots/v5.0/`
- Workflow doc: `workflow-docs/v5.0_workflow_create_http_get_request.md` (create it during execution, not before)

## Screenshot + Documentation Rules

- Ensure `screenshots/v5.0/` exists before capturing.
- Naming: `v5_step_XX_<short-desc>.png` (e.g., `v5_step_03_bi_view_loaded.png`).
- After each screenshot, immediately append to the workflow doc under **Live Step Log** with:
  - Timestamp (UTC), Stage, concise action, screenshot link, observed status.
- Capture only after UI is fully loaded and stable.

## Workflow Stages

### Stage 1: Authentication
- Navigate to https://devant.dev; sign in with provided credentials (prompt for OTP if requested).

### Stage 2: Project Setup
- Open Default project → click **Create an Integration** → wait for editor tab to load.

### Stage 3: Ballerina Integrator View
- Click **Ballerina Integrator / WSO2 Integrator: BI** in sidebar → confirm tree shows Entry Points, Listeners, etc.

### Stage 4: HTTP GET Creation (Low-Code)
- In Entry Points, **Add Entry Point** → select HTTP Resource → set:
  - Method: GET
  - Path: /hello
  - Entry Point Name: HelloWorldGET

### Stage 5: Response Configuration
- Set response mapping:
  - Content-Type: application/json
  - Body: `{ "message": "hello from Ballerina integrator" }`

### Stage 6: Listener Configuration
- In Listeners, ensure HTTP listener exists/configured:
  - Host: localhost
  - Port: 8080
  - Bind to the service if required.

### Stage 7: Testing and Verification
- In Service Designer, use **Try Service** (or Run Integration) to call GET `/hello`.
- Validate response equals expected JSON.

### Stage 8: Documentation
- For every major action/screenshot, create/update the workflow doc Live Step Log during the run.
- Finalize with execution log and success criteria.

## Agent Instructions

- Autonomously navigate the BI UI; adapt to label variations.
- Maintain `networkidle` waits and visual stability checks.
- Apply CDN hardening when dialogs fail to render.
- Keep doc and screenshots synchronized (no delayed batching).
- If low-code UI fails after retries, stop and request guidance.

## Credentials

- Email: vishwajayawickrama2002@gmail.com
- Password: vishwacat
- OTP: Ask the user if prompted

## Deliverables

1. Workflow documentation in `workflow-docs/v5.0_workflow_create_http_get_request.md`
2. Screenshots in `screenshots/v5.0/` named `v5_step_XX_<desc>.png`
3. Verification evidence of GET `/hello` response (Try Service output or curl)

## Execution Log (to maintain during run)

- [ ] Stage 1: Authentication Complete
- [ ] Stage 2: Project Setup Complete
- [ ] Stage 3: Ballerina Integrator View Loaded
- [ ] Stage 4: HTTP GET Creation Complete
- [ ] Stage 5: Response Configuration Complete
- [ ] Stage 6: HTTP Listener Configuration Complete
- [ ] Stage 7: Testing and Verification Complete
- [ ] Stage 8: Documentation Complete

## Success Criteria

- Low-code-only implementation; no source edits.
- Entry point GET `/hello` created and bound to listener.
- Response returns `{ "message": "hello from Ballerina integrator" }` in Try Service.
- Workflow doc reflects each screenshot with matching timestamps and captions.
- Screenshots organized in `screenshots/v5.0/` without mixing versions.
